# This program can be used to create a TCP connection to any port of a host
# It is mainly used for testing the connectivity of the host
#
# Author: Yi Hu

import socket
import sys

class UdpClient:
    def __init__(self, host: str, port:str):
        self.host = host
        self.port = port

    def send_and_receive(self):
        # create a socket object
        client = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)

        # send some data
        client.sendto(b'123456789ABCDEFG', (self.host, self.port))

        # receive some data
        data, addr = client.recvfrom(4096)

        print(data.decode())
        client.close()

if __name__ == '__main__':
    # check to see if the user gives required command line parameters
    if len(sys.argv) < 3:
        print('Command usage: python udp_client.py hostname port')
        sys.exit(0)

    # get user input of host and port
    host = sys.argv[1]
    port = int(sys.argv[2])

    # connect to the host's port
    client = UdpClient(host, port)
    client.send_and_receive()